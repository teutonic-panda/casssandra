<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Condições — Cassandra</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background-color: #0f172a; /* azul escuro */
    color: #e2e8f0;
    margin: 0;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  h1 {
    color: #60a5fa;
  }

  #search {
    width: 240px;
    padding: 6px 10px;
    border-radius: 8px;
    border: 1px solid #334155;
    background-color: #1e293b;
    color: #e2e8f0;
    margin-bottom: 10px;
  }

  #result {
    position: sticky;
    top: 0;
    background-color: #1e293b;
    border: 1px solid #334155;
    border-radius: 8px;
    padding: 10px;
    margin-bottom: 15px;
    width: 360px;
    text-align: left;
    min-height: 80px;
    max-height: 180px;
    overflow-y: auto;
  }

  table {
    border-collapse: collapse;
    margin-top: 5px;
    background-color: #1e293b;
    border-radius: 8px;
    overflow: hidden;
  }

  th, td {
    padding: 6px 12px;
    text-align: center;
    border-bottom: 1px solid #334155;
  }

  th {
    background-color: #0f172a;
    color: #93c5fd;
  }

  tr:hover {
    background-color: #334155;
    cursor: pointer;
  }

  td.id {
    color: #64748b;
    font-size: 0.9em;
  }

  td.name {
    font-weight: bold;
    color: #e2e8f0;
  }

  #table-container {
    display: flex;
    justify-content: center;
    overflow-x: auto;
  }
</style>
</head>
<body>
  <h1>Condições</h1>
  <input type="text" id="search" placeholder="Buscar condição...">
  <div id="result">Selecione ou pesquise uma condição...</div>
  <div id="table-container">
    <table id="conditionsTable">
      <thead>
        <tr><th>ID</th><th>Condição</th></tr>
      </thead>
      <tbody></tbody>
    </table>
  </div>

<script>
  const url = "https://raw.githubusercontent.com/teutonic-panda/casssandra/main/conditions.json";
  let conditions = [];

  fetch(url)
    .then(response => response.json())
    .then(data => {
      conditions = data;
      const tbody = document.querySelector("#conditionsTable tbody");
      data.forEach(cond => {
        const tr = document.createElement("tr");
        tr.innerHTML = `<td class="id">${cond.id}</td><td class="name">${cond.nome}</td>`;
        tr.addEventListener("click", () => showCondition(cond));
        tbody.appendChild(tr);
      });
    });

  const resultBox = document.getElementById("result");

  function showCondition(cond) {
    resultBox.innerHTML = `
      <strong>${cond.nome}</strong><br>
      ${cond.descricao || "Sem descrição disponível."}
    `;
  }

  document.getElementById("search").addEventListener("input", function() {
    const query = this.value.toLowerCase();
    const cond = conditions.find(c => c.nome.toLowerCase().includes(query));
    if (cond) showCondition(cond);
  });
</script>
</body>
</html>
